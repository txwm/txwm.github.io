<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>hello world</title>
	</head>
	<body>
		<style>
			#imgwarp{
				width:800px;
				height:400px;
				margin:80px auto;
				perspective:800px;
			}
			#imgwarp img{
				float:left;
				height:80px;
			}
			#btn{
				width:100px;
				text-align:center;
				font:16px/40px "微软雅黑";
				color:#fff;
				padding:0 20px;
				background:rgb(0,100,0);
				border-radius:3px;
				margin:0 auto;
				cursor:pointer;
				box-shadow: 2px 2px 5px rgba(0,0,0,0.5);
				-webkit-user-select:none;
			    -moz-user-select:none;
			    -ms-user-select:none;
			    user-select:none;
			}
		</style>
		<div id="imgwarp">
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
			<img src="./images/index1/1.jpg" style="width:80px;" /> 
		</div>
		<div id="btn">点击查看效果</div>
		<script>
			window.onload = function(){
				var on = true;
				var btn = document.querySelector("#btn");
				var imgs = document.querySelectorAll("img");
				btn.onclick = function(){
					if(!on){
						return;
					}
					on = false;
					var endNum = 0;
					var allEnd = 0;
					for(var i=0;i<imgs.length;i++){
						(function(i){
							setTimeout(function(){
								montion(imgs[i],"10ms",function(){
									this.style.transform="scale(0)";
									// this.style.opacity=0;
								},function(){
									montion(this,"1s",function(){
										this.style.transform = "scale(1)";
										this.style.opacity=0;
									},function(){
										endNum++;
										if(endNum == imgs.length){
											toBig();
										}
									});
								});
							},Math.random()*1000)
						})(i)
						
					}

					function toBig(){
						for(var i=0;i<imgs.length;i++){
							imgs[i].style.transition = "";
							imgs[i].style.transform = "rotateY(0deg)translateZ(-"+Math.random()*500+"px)";

							(function(i){
								setTimeout(function(){
									montion(imgs[i],"2s",function(){
										this.style.opacity = 1;
										this.style.transform = "rotateY(-360deg) translateZ(0px)";
									},function(){
										allEnd++;
										if(allEnd == imgs.length){
											on=true;
										}
									});
								},Math.random()*1000)
								
							})(i);
						}
					}

				};

					

				function montion(obj,time,doFn,callBack){
					obj.style.transition=time;
					doFn.call(obj);
					var called = false;
					obj.addEventListener("transitionend",function(){
						if(!called){
							callBack && callBack.call(obj);
							called = true;
						}
					},false);
				}
			}
		</script>
	</body>
</html>